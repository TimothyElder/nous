{
  "scopeName": "markdown.nous.injection",
  "injectionSelector": "L:text.html.markdown",
    "patterns": [
      { "include": "#inline-footnote" }, 
      { "include": "#inline-comment"}
    ],
  "repository": {
    "inline-comment": {
      "comment": "Matches inline comments like {{ comment here }}",
      "name": "comment.block.curlybrackets",
      "match": "\\{\\{[^{}]*\\}\\}"
    },
    "footnote-reference": {
      "comment": "Matches footnote references like [^1] or [^note-name]",
      "name": "markup.footnote.reference.markdown",
      "match": "(\\[)(\\^[^\\]]+)(\\])",
      "captures": {
        "1": {
          "name": "punctuation.definition.footnote.begin.markdown"
        },
        "2": {
          "name": "entity.name.footnote.markdown"
        },
        "3": {
          "name": "punctuation.definition.footnote.end.markdown"
        }
      }
    },
    "footnote-definition": {
      "comment": "Matches footnote definitions like [^1]: content",
      "name": "markup.footnote.definition.markdown",
      "begin": "^(\\[)(\\^[^\\]]+)(\\]:)\\s*",
      "end": "^(?!\\s{4}|\\t)",
      "beginCaptures": {
        "1": {
          "name": "punctuation.definition.footnote.begin.markdown"
        },
        "2": {
          "name": "entity.name.footnote.definition.markdown"
        },
        "3": {
          "name": "punctuation.definition.footnote.colon.markdown"
        }
      },
      "contentName": "markup.footnote.content.markdown",
      "patterns": [
        {
          "include": "text.html.markdown"
        }
      ]
    },
    "inline-footnote": {
      "comment": "Matches inline footnotes like ^[content here]",
      "name": "markup.footnote.inline.markdown",
      "match": "\\^\\[[^\\]]*\\]"
    }
  }
}